<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>xFORTUNAx | Столкновение</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- GLOBAL STYLES --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #0f0f12;
            background-image: linear-gradient(to bottom, rgba(15, 15, 18, 0.95), #0f0f12), url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2070&auto=format&fit=crop');
            background-size: cover; background-position: center; background-attachment: fixed;
            color: #e0e0e0; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
        }

        /* --- HEADER --- */
        .top-nav { width: 100%; max-width: 1000px; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .back-btn { color: #888; text-decoration: none; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; transition: 0.3s; background: rgba(255,255,255,0.05); padding: 8px 15px; border-radius: 20px; }
        .back-btn:hover { color: white; background: rgba(255,255,255,0.1); }
        .page-brand { font-size: 1.2rem; color: #00e5ff; font-weight: 700; text-transform: uppercase; text-shadow: 0 0 10px rgba(0, 229, 255, 0.4); }

        /* --- TABS --- */
        .tabs-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            width: 95%;
            max-width: 800px;
        }
        .tab-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            flex: 1;
            max-width: 200px;
            text-align: center;
        }
        .tab-btn.active {
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            color: white;
            border-color: transparent;
            box-shadow: 0 0 15px rgba(0, 114, 255, 0.4);
        }

        /* --- CONTENT CONTAINER --- */
        .content-container {
            width: 95%; max-width: 800px;
            background: rgba(30, 30, 35, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.5);
            display: none; /* Hidden by default, JS toggles it */
            animation: fadeIn 0.4s ease-in-out;
        }
        .content-container.active-view { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- TYPOGRAPHY --- */
        h1 {
            text-align: center; font-size: 2rem; margin-bottom: 10px;
            background: linear-gradient(45deg, #ff9966, #ff5e62);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 94, 98, 0.3);
        }
        h2 {
            color: #fff; font-size: 1.3rem; margin-top: 40px; margin-bottom: 15px;
            padding-bottom: 10px; border-bottom: 2px solid rgba(255, 94, 98, 0.5); display: inline-block;
        }
        h3 { color: #00e5ff; font-size: 1.1rem; margin-top: 25px; margin-bottom: 10px; }
        p, li { line-height: 1.6; font-size: 0.95rem; color: #ccc; margin-bottom: 10px; }
        strong { color: white; font-weight: 600; }
        a.link { color: #00e5ff; text-decoration: underline; font-weight: bold; }
        ul { list-style: none; padding-left: 0; }
        ul li { position: relative; padding-left: 20px; }
        ul li::before { content: '•'; color: #ff5e62; position: absolute; left: 0; font-weight: bold; }

        /* --- IMAGES --- */
        .img-box { width: 100%; margin: 20px 0; border-radius: 12px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1); }
        .img-box img { width: 100%; display: block; }
        .img-caption { font-size: 0.8rem; color: #888; text-align: center; margin-top: 5px; font-style: italic; }

        /* --- TASK CARDS --- */
        .task-card {
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 10px; padding: 15px; margin-bottom: 15px;
        }
        .task-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .task-icon { color: #ffd700; font-size: 1.2rem; }
        .task-values { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px; margin-top: 10px; font-size: 0.9rem; border-left: 3px solid #00e5ff; }

        /* --- ACTIVE GAME SECTION STYLES --- */
        .status-badge {
            display: inline-block; padding: 5px 12px; border-radius: 20px;
            background: rgba(46, 213, 115, 0.2); color: #2ed573;
            border: 1px solid rgba(46, 213, 115, 0.4); font-size: 0.8rem; font-weight: bold; margin-bottom: 15px;
        }
        .reg-btn {
            display: block; width: 100%; max-width: 300px; margin: 20px auto; padding: 15px;
            background: linear-gradient(45deg, #00c6ff, #0072ff); color: white; text-align: center;
            text-decoration: none; border-radius: 50px; font-weight: bold; font-size: 1.1rem;
            box-shadow: 0 5px 20px rgba(0, 114, 255, 0.3); transition: 0.3s;
        }
        .reg-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0, 114, 255, 0.5); }
        
        .leaderboard-wrapper {
            display: flex; flex-wrap: wrap; gap: 20px; margin-top: 30px;
        }
        .leaderboard-col { flex: 1; min-width: 280px; }
        .lb-title { text-align: center; color: #ffd700; font-weight: bold; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .lb-table { width: 100%; border-collapse: separate; border-spacing: 0 8px; }
        .lb-row { background: rgba(255,255,255,0.05); transition: 0.2s; }
        .lb-row:hover { background: rgba(255,255,255,0.1); transform: translateX(5px); }
        .lb-cell { padding: 12px 15px; vertical-align: middle; }
        
        .lb-pos { font-weight: bold; color: #888; width: 70px; text-align: left; border-radius: 10px 0 0 10px; white-space: nowrap; }
        .lb-name { color: white; }
        .lb-score { font-weight: bold; color: #00e5ff; text-align: right; border-radius: 0 10px 10px 0; }
        
        /* Prize Icon Style */
        .prize-icon {
            height: 24px;
            vertical-align: middle;
            margin-left: 5px;
            filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.4));
            border-radius: 4px; /* Optional for square images */
        }

        /* Gold/Silver/Bronze Styles */
        .lb-row.pos-1 .lb-pos { color: #ffd700; font-size: 1.2rem; }
        .lb-row.pos-1 { background: linear-gradient(90deg, rgba(255, 215, 0, 0.1), rgba(255, 255, 255, 0.05)); border: 1px solid rgba(255, 215, 0, 0.3); }
        .lb-row.pos-2 .lb-pos { color: #c0c0c0; font-size: 1.1rem; }
        .lb-row.pos-3 .lb-pos { color: #cd7f32; font-size: 1.1rem; }

        @media (max-width: 600px) {
            .content-container { padding: 15px; width: 98%; }
            h1 { font-size: 1.6rem; }
            h2 { font-size: 1.1rem; width: 100%; }
            .leaderboard-col { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="top-nav">
        <a href="findagame.html" class="back-btn"><i class="fas fa-arrow-left"></i> Назад</a>
        <div class="page-brand">СТОЛКНОВЕНИЕ</div>
    </div>

    <div class="tabs-container">
        <div class="tab-btn active" onclick="switchTab('rules')">Правила</div>
        <div class="tab-btn" onclick="switchTab('game')">Активная игра</div>
    </div>

    <div id="section-rules" class="content-container active-view">
        <h1>Правила игры</h1>
        
        <div class="img-box">
            <img src="https://cdn.jsdelivr.net/gh/xF0RTUNAx/wtm-materials@pics/map.png" alt="Карта игры">
            <div class="img-caption">Глобальная карта столкновения</div>
        </div>

        <h2>1. Вкратце про суть мини-игры</h2>
        <p>Каждая команда представлена на игровой карте в случайном месте. Командам необходимо захватывать и удерживать локации выполняя задания в War Thunder Mobile.</p>
        <p>За захват и удержание локаций команде ежедневно начисляется соответствующее количество очков.</p>
        <p>Побеждает команда, набравшая наибольшее количество очков по истечению всех игровых дней.</p>

        <h2>2. Про механику и правила мини-игры</h2>
        <ul>
            <li>1. За один игровой день возможно совершить <strong>1 атаку</strong> и <strong>1 защиту</strong>.</li>
            <li>2. Игровой день обновляется в <strong>13:00 по GMT +3</strong>.</li>
            <li>3. Если команда не успела вовремя сообщить о своих ходах на аккаунт <a href="https://t.me/fortunawtmhelp" class="link" target="_blank">тех поддержки</a>, ход осуществится <strong>случайным образом</strong> (предусмотрено уведомление о случайном выборе).</li>
            <li>4. <strong>Захват</strong> чужих локаций и <strong>защита</strong> собственных доступна с <strong>3 игрового дня</strong>.</li>
            <li>5. <strong>Захват</strong> прошел <strong>успешно</strong> в случае <strong>полного выполнения задания в WTM</strong>.<br>
            В противном случае, локация остается <strong>не захваченной</strong>, но <strong>прогресс переносится</strong> на следующий игровой день.</li>
            <li>6. Если <strong>несколько команд</strong> претендует на <strong>захват одной локации</strong>, <strong>захватывает</strong> та команда, которая <strong>больше всех перевыполнит</strong> указанное игровое задание (при ничье, никто не захватит).</li>
            <li>7. Для <strong>успешной защиты</strong> необходимо <strong>повторить выполнение задания</strong> удерживаемой локации.<br>
            Захват осуществится, если <strong>захватывающая сторона перевыполнит результаты</strong> задания локации <strong>защищающейся стороны</strong>.</li>
            <li>8. <strong>Участники</strong> команды производят <strong>независимый вклад</strong> в общую задачу.<br>
            Таким образом, <strong>нагрузка распределяется самостоятельно</strong> внутри команды. (Рекомендуется коммуникация для эффективной командной игры).</li>
            <li>9. <strong>Подача прогресса</strong> выполнения игрового задания командами <strong>осуществляется в качестве скриншотов</strong> на указанный контакт (появится позже).<br>
            При отправке <strong>скриншотов</strong> необходимо <strong>подтверждение</strong>, что <strong>бой проходил во время активной мини-игры</strong>.<br>
            (скриншот со взводом [если это важно для условия задания] + скриншот с результатами боя, демонстрирующие полученные награды [если это важно для условия задания] – <strong>ВАЖНО!</strong> Скриншоты должны включать дату или отправлены в качестве файла для проверки метаданных даты.</li>
            <li>10. <strong>Удержание</strong> локаций приносит <strong>столько же очков</strong>, <strong>сколько было при захвате</strong>.</li>
            <li>11. <strong>Захват первичных локаций</strong> команд на текущий момент <strong>не предусмотрено</strong>.</li>
            <li>12. <strong>Ограничений</strong> по <strong>технике</strong> на текущий момент <strong>не предусмотрено</strong>.</li>
            <li>13. Локации <strong>со штриховкой</strong> <strong>разрывают связь</strong> между <strong>остальными локациями</strong>, <strong>не подлежат захвату</strong> и выступают буфером <strong>для балансировки визуальных ошибок карты</strong>.</li>
        </ul>

        <h2>3. Подробнее про захват локаций</h2>
        <div class="img-box">
            <img src="https://cdn.jsdelivr.net/gh/xF0RTUNAx/wtm-materials@pics/captloc.png" alt="Схема захвата">
            <div class="img-caption">Пример доступных для захвата зон</div>
        </div>
        <p>Возможность захвата новой локации доступна при условии общей границы с уже захваченными.</p>
        <p>(например, как показано с командами 1 и 2 – следующий шаг возможен в локации с галочкой).</p>

        <h2>4. Подробнее про защиту локаций</h2>
        <div class="img-box">
            <img src="https://cdn.jsdelivr.net/gh/xF0RTUNAx/wtm-materials@pics/defloc.png" alt="Схема защиты">
            <div class="img-caption">Пример применения защиты</div>
        </div>
        <p>Защиту можно применить к любой удерживаемой локации. (пример подходящих под защиту локаций показан на рисунке в виде значков щита).</p>
        <p>К слову совет: если рядом отсутствуют границы с чужими локациями, то ничего не мешает пропустить защиту в этот игровой день и освободить себя от дополнительных заданий.</p>

        <h2>5. Задания</h2>
        <p>На текущий момент предусмотрены следующие локации и задания для них:</p>

        <div class="task-card">
            <div class="task-header">
                <i class="fas fa-flag task-icon"></i>
                <strong>База (США / Германия / СССР / Союзные) +3</strong>
            </div>
            <p>Выбрав соответствующую локацию с базой, команде необходимо выполнить следующее:</p>
            <p>Уничтожить технику противника используя взвод исключительно из техники нации выбранной базы (поддерживается любая кампания).</p>
            <div class="task-values">
                <div>Ориентировочные значения:</div>
                <div>Для 2-х человек в команде: <strong>10</strong></div>
                <div>Для 5-ти: <strong>25</strong></div>
            </div>
        </div>

        <div class="task-card">
            <div class="task-header">
                <i class="fas fa-skull-crossbones task-icon"></i>
                <strong>Охотник за головами +5</strong>
            </div>
            <p>Выбрав данную локацию, команде необходимо выполнить следующее:</p>
            <p>Уничтожить нужное количество техники противника во всех кампаниях.</p>
            <div class="task-values">
                <div>Ориентировочные значения:</div>
                <div>Для 2-х человек в команде: <strong>10 танки / 1 флот / 2 авиация</strong></div>
                <div>Для 5-ти: <strong>25 / 2 / 4</strong></div>
            </div>
        </div>

        <div class="task-card">
            <div class="task-header">
                <i class="fas fa-star task-icon"></i>
                <strong>Опытный +5</strong>
            </div>
            <p>Выбрав данную локацию, команде необходимо выполнить следующее:</p>
            <p>Набрать суммарно нужное количество очков в боях (поддерживается любая кампания).</p>
            <div class="task-values">
                <div>Ориентировочные значения:</div>
                <div>Для 2-х человек в команде: <strong>2000</strong></div>
                <div>Для 5-ти: <strong>5000</strong></div>
            </div>
        </div>

        <div class="task-card">
            <div class="task-header">
                <i class="fas fa-clover task-icon"></i>
                <strong>"Удачный" +8</strong>
            </div>
            <p>Выбрав данную локацию, команде необходимо выполнить следующее:</p>
            <p>Получить медали за первого уничтоженного в бою/последнего уничтоженного в бою/альфа и омега (первый и последний уничтоженный в бою) [только танковая кампания].</p>
            <div class="task-values">
                <div>Ориентировочные значения:</div>
                <div>Для 2-х человек в команде: <strong>1 первых уничтоженных или 1 последних уничтоженных или 1 альфа и омега</strong></div>
                <div>Для 5-ти: <strong>4 или 4 или 2 (соответственно)</strong></div>
            </div>
        </div>

        <div class="task-card">
            <div class="task-header">
                <i class="fas fa-medal task-icon"></i>
                <strong>Медалист +8</strong>
            </div>
            <p>Выбрав данную локацию, команде необходимо выполнить следующее:</p>
            <p>Получить нужное суммарное количество медалей в боях (поддерживается любая кампания, повторные медали в одном и том же бою в зачет не идут!).</p>
            <div class="task-values">
                <div>Ориентировочные значения:</div>
                <div>Для 2-х человек в команде: <strong>20</strong></div>
                <div>Для 5-ти: <strong>50</strong></div>
            </div>
        </div>

        <div class="task-card">
            <div class="task-header">
                <i class="fas fa-mountain task-icon"></i>
                <strong>"Олимп" +10</strong>
            </div>
            <p>Выбрав данную локацию, команде необходимо выполнить следующее:</p>
            <p>Получить одну из требуемых наград: или подобный богу, или сюрприз, или огненные стрелы, или последний выживший.</p>
            <div class="task-values">
                <div>Ориентировочные значения:</div>
                <div>Для 2-х человек в команде: <strong>1</strong></div>
                <div>Для 5-ти: <strong>2 (любые, в том числе одну и ту же)</strong></div>
            </div>
        </div>

        <h2>6. Прочее, но важное</h2>
        <ul>
            <li>1. Мини-игра находится в состоянии альфа-теста. Уместные изменения и прочие правки будут внесены в следующие версии.</li>
            <li>2. На этапе тестов мини-игра будет проведена с ограниченными, но стоящими наградами.<br>
            Если такой формат зарекомендует себя, то планируется масштабировать награды в более крупную сторону.</li>
            <li>3. На текущий момент мини-игра видится продолжительностью в 7 дней.</li>
            <li>4. В зависимости от кол-ва игроков, финальные награды могут варьироваться. Следите за условиями актуальной игры.</li>
            <li>5. Задавайте вопросы, предлагайте изменения, комментируйте – важна обратная связь и проект, который удовлетворит большинство из нашего сообщества.</li>
        </ul>
        <p style="text-align:center; margin-top:20px; font-weight:bold;">Спасибо за внимание!</p>
        <p style="text-align:center; font-size: 0.8rem; color:#666;">В будущих версиях мини-игры карта может претерпеть изменений.</p>
    </div>

    <div id="section-game" class="content-container">
        <div style="text-align:center;">
            <div class="status-badge"><i class="fas fa-broadcast-tower"></i> LIVE UPDATE</div>
            <h1>Ход Игры</h1>
            <p style="font-size:0.9rem; opacity:0.8;">Данный раздел обновляется во время активной фазы игры. Следите за картой и счетом команд.</p>
        </div>

        <a href="https://t.me/fortunawtmhelp" class="reg-btn" target="_blank">
            <i class="fas fa-file-signature"></i> ЗАПИСАТЬСЯ НА ИГРУ
        </a>

        <div class="img-box">
            <img src="https://cdn.jsdelivr.net/gh/xF0RTUNAx/wtm-materials@pics/map.png" alt="Live Map">
            <div class="img-caption">Текущая ситуация на карте (обновляется)</div>
        </div>

        <div class="leaderboard-wrapper">
            <div class="leaderboard-col">
                <div class="lb-title"><i class="fas fa-user-friends"></i> Команды (2 чел.)</div>
                <table class="lb-table">
                    <tbody id="lb-2v2-body">
                        </tbody>
                </table>
            </div>

            <div class="leaderboard-col">
                <div class="lb-title"><i class="fas fa-users"></i> Команды (5 чел.)</div>
                <table class="lb-table">
                    <tbody id="lb-5v5-body">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        function switchTab(tabId) {
            // Update buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update sections
            document.querySelectorAll('.content-container').forEach(sec => sec.classList.remove('active-view'));
            document.getElementById('section-' + tabId).classList.add('active-view');
        }

        /* --- LEADERBOARD DATA & LOGIC --- */
        // РЕДАКТИРУЙ ЭТИ ЗНАЧЕНИЯ (ОЧКИ) ВО ВРЕМЯ ИГРЫ
        
        const teams2v2 = [
            { name: "Команда А", score: 0 },
            { name: "Команда Б", score: 0 },
            { name: "Команда В", score: 0 },
            { name: "Команда Г", score: 0 }
        ];

        const teams5v5 = [
            { name: "Команда 1", score: 0 },
            { name: "Команда 2", score: 0 },
            { name: "Команда 3", score: 0 },
            { name: "Команда 4", score: 0 }
        ];

        function renderLeaderboards() {
            renderTable('lb-2v2-body', teams2v2);
            renderTable('lb-5v5-body', teams5v5);
        }

        function renderTable(elementId, data) {
            // Sort Descending
            data.sort((a, b) => b.score - a.score);

            const tbody = document.getElementById(elementId);
            tbody.innerHTML = '';

            data.forEach((team, index) => {
                const pos = index + 1;
                let rowClass = '';
                if(pos === 1) rowClass = 'pos-1';
                else if(pos === 2) rowClass = 'pos-2';
                else if(pos === 3) rowClass = 'pos-3';

                // PRIZE ICONS LOGIC
                let prizeHtml = '';
                if(pos === 1) {
                    prizeHtml = '<img src="https://cdn.jsdelivr.net/gh/xF0RTUNAx/wtm-materials@pics/cplatina.PNG" class="prize-icon" alt="1st Prize">';
                } else if(pos === 2) {
                    prizeHtml = '<img src="https://cdn.jsdelivr.net/gh/xF0RTUNAx/wtm-materials@pics/cpremium.PNG" class="prize-icon" alt="2nd Prize">';
                } else if(pos === 3) {
                    prizeHtml = '<img src="https://cdn.jsdelivr.net/gh/xF0RTUNAx/wtm-materials@pics/cveteran.jpg" class="prize-icon" alt="3rd Prize">';
                }

                const tr = document.createElement('tr');
                tr.className = `lb-row ${rowClass}`;
                tr.innerHTML = `
                    <td class="lb-cell lb-pos">#${pos} ${prizeHtml}</td>
                    <td class="lb-cell lb-name">${team.name}</td>
                    <td class="lb-cell lb-score">${team.score}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Init on load
        window.addEventListener('load', renderLeaderboards);
    </script>

</body>

</html>
