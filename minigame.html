<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xFORTUNAx | Debug Mode</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    
    <style>
        /* –û–±—ã—á–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }
        body { font-family: 'Poppins', sans-serif; background-color: #0f0f12; color: white; padding: 20px; padding-bottom: 200px; /* –ú–µ—Å—Ç–æ –¥–ª—è –ª–æ–≥–∞ */ }
        .btn-main { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: 700; font-size: 1em; cursor: pointer; margin-top: 10px; background: #00e5ff; color: #0f0f12; }
        .login-area { max-width: 400px; margin: 0 auto; margin-top: 50px; text-align: center; }
        input { width: 100%; padding: 10px; margin-bottom: 10px; background: #222; border: 1px solid #444; color: white; text-align: center; }

        /* –°–¢–ò–õ–ò –î–õ–Ø –ö–û–ù–°–û–õ–ò –û–®–ò–ë–û–ö */
        #debug-console {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: rgba(0, 0, 0, 0.9);
            color: #0f0;
            font-family: monospace;
            font-size: 10px;
            padding: 10px;
            overflow-y: scroll;
            z-index: 99999;
            border-top: 2px solid #0f0;
            text-align: left;
        }
        .log-line { margin-bottom: 2px; border-bottom: 1px solid #333; }
        .log-error { color: #ff4444; font-weight: bold; }
        .log-warn { color: #ffbb33; }
    </style>
</head>
<body>

    <div class="login-area">
        <h1>DEBUG MODE</h1>
        <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã</p>

        <input type="text" id="access-key" placeholder="–ö–ª—é—á...">
        <button class="btn-main" onclick="alert('–≠—Ç–æ —Ç–µ—Å—Ç')">–í–æ–π—Ç–∏</button>

        <br><br>
        
        <button id="ad-btn" class="btn-main" onclick="debugShowAd()" style="background: linear-gradient(45deg, #f1c40f, #e67e22);">
            üé¨ –¢–ï–°–¢: –°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É
        </button>
        
        <br><br>
        <button onclick="window.location.reload()" style="padding: 10px; background: #333; color: white; border:none;">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
    </div>

    <div id="debug-console">
        <div>=== SYSTEM LOG ===</div>
    </div>

    <script>
        // --- 1. –ü–ï–†–ï–•–í–ê–¢ –õ–û–ì–û–í (–ß—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∏—Ö –Ω–∞ —ç–∫—Ä–∞–Ω–µ) ---
        function log(msg, type = 'info') {
            const consoleDiv = document.getElementById('debug-console');
            const line = document.createElement('div');
            line.className = 'log-line';
            
            let time = new Date().toLocaleTimeString();
            if (typeof msg === 'object') msg = JSON.stringify(msg);
            
            line.innerText = `[${time}] ${msg}`;
            
            if (type === 'error') line.className += ' log-error';
            if (type === 'warn') line.className += ' log-warn';
            
            consoleDiv.appendChild(line);
            consoleDiv.scrollTop = consoleDiv.scrollHeight; // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞
        }

        window.onerror = function(message, source, lineno, colno, error) {
            log(`CRITICAL JS ERROR: ${message} (Line: ${lineno})`, 'error');
        };

        // --- 2. –ù–ê–°–¢–†–û–ô–ö–ò ---
        const AdsgramBlockId = "–í–ê–®_BLOCK_ID_–°–Æ–î–ê"; // <--- –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê –í–ê–® ID
        
        let AdController;

        // --- 3. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
        window.addEventListener('load', () => {
            log("–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞.");
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram
            if (window.Telegram && window.Telegram.WebApp) {
                log("Telegram SDK: OK");
                log("Platform: " + window.Telegram.WebApp.platform);
                window.Telegram.WebApp.expand();
            } else {
                log("Telegram SDK: NOT FOUND (–í—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ?)", 'warn');
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ Adsgram
            if (window.Adsgram) {
                log("Adsgram Library: OK");
                initAdsgram();
            } else {
                log("Adsgram Library: ERROR (–°–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è)", 'error');
                log("–°–æ–≤–µ—Ç: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ AdBlock –∏–ª–∏ VPN", 'warn');
            }
        });

        function initAdsgram() {
            log(`–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–ª–æ–∫–∞: ${AdsgramBlockId}...`);
            try {
                AdController = window.Adsgram.init({ blockId: AdsgramBlockId });
                if (AdController) {
                    log("–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–æ–∑–¥–∞–Ω –£–°–ü–ï–®–ù–û.");
                } else {
                    log("–û—à–∏–±–∫–∞: init() –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ—Ç—É.", 'error');
                }
            } catch (e) {
                log("–û—à–∏–±–∫–∞ –ø—Ä–∏ init(): " + e.message, 'error');
            }
        }

        // --- 4. –ó–ê–ü–£–°–ö –†–ï–ö–õ–ê–ú–´ ---
        function debugShowAd() {
            log(">>> –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ —Ä–µ–∫–ª–∞–º—ã");

            if (!AdController) {
                log("–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –Ω–µ—Ç. –ü—Ä–æ–±—É—é —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ...", 'warn');
                initAdsgram();
                if (!AdController) {
                    alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º—É. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥.");
                    return;
                }
            }

            log("–í—ã–∑—ã–≤–∞—é AdController.show()...");
            
            AdController.show().then((result) => {
                // –£—Å–ø–µ—Ö –∏–ª–∏ –∫–æ–Ω–µ—Ü –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
                log("–†–µ–∑—É–ª—å—Ç–∞—Ç Promise: " + JSON.stringify(result));
                
                if (result.done) {
                    log("–£–°–ü–ï–•! –†–µ–∫–ª–∞–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞.", 'info');
                    alert("–£–†–ê! –†–µ–∫–ª–∞–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ú–æ–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥.");
                    
                    // –¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–∞
                    localStorage.setItem('wtm_session', 'TEST_SESSION_OK');
                    log("–ö–ª—é—á –∑–∞–ø–∏—Å–∞–Ω –≤ localStorage.");
                } else {
                    log("–†–µ–∫–ª–∞–º–∞ –∑–∞–∫—Ä—ã—Ç–∞ –∏–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω–∞.", 'warn');
                }
            }).catch((err) => {
                // –û—à–∏–±–∫–∞
                log("–û–®–ò–ë–ö–ê –ü–û–ö–ê–ó–ê (CATCH):", 'error');
                log(err, 'error');
                
                // –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫
                if (JSON.stringify(err).includes("404")) log("–ü–æ—è—Å–Ω–µ–Ω–∏–µ: –ë–ª–æ–∫ ID –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω.", 'warn');
                if (JSON.stringify(err).includes("no ads")) log("–ü–æ—è—Å–Ω–µ–Ω–∏–µ: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ä–µ–∫–ª–∞–º—ã –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞.", 'warn');
            });
        }
    </script>
</body>
</html>




