<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    /* ============================================== */
    /* === ИЗОЛЯЦИЯ СТИЛЕЙ (CSS SCOPING) === */
    /* Все стили начинаются с #tank-campaign-root, */
    /* чтобы не ломать index.html */
    /* ============================================== */

    /* Основной контейнер */
    #tank-campaign-root {
        box-sizing: border-box;
        max-width: 1100px;
        margin: 20px auto 40px auto; 
        padding: 30px;
        background: #1c2119;
        /* Текстура сетки на фоне плашки */
        background-image: repeating-linear-gradient(
            45deg,
            rgba(0,0,0,0.1),
            rgba(0,0,0,0.1) 10px,
            transparent 10px,
            transparent 20px
        );
        border: 4px solid #3e4a36; 
        border-radius: 8px;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.7), inset 0 0 50px rgba(0,0,0,0.5);
        position: relative;
        z-index: 5;
        font-family: 'Roboto', sans-serif; /* Локальный шрифт */
        color: #fff;
    }

    /* Сброс box-sizing для всех элементов внутри */
    #tank-campaign-root * {
        box-sizing: border-box;
    }

    /* Декоративная рамка (заклепки) */
    #tank-campaign-root::after {
        content: '';
        position: absolute;
        top: 10px; left: 10px; right: 10px; bottom: 10px;
        border: 1px dashed #556b2f;
        pointer-events: none;
    }

    /* Заголовки */
    #tank-campaign-root h1, 
    #tank-campaign-root h2, 
    #tank-campaign-root h3 {
        font-family: 'Black Ops One', 'Roboto', sans-serif !important;
        color: #8fbc8f;
        text-shadow: 0 2px 5px rgba(0,0,0,0.8);
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-top: 0;
        text-align: center;
        line-height: 1.2;
    }

    #tank-campaign-root h1 {
        font-size: 2.5em;
        border-bottom: 3px solid #556b2f;
        padding-bottom: 15px;
        margin-bottom: 30px;
    }
    
    #tank-campaign-root h2 {
        font-size: 1.8em;
        color: #d2b48c;
        margin-bottom: 15px;
    }

    /* Блок выбора нации */
    #tank-campaign-root .nation-selection {
        text-align: center;
        background: rgba(0, 0, 0, 0.3);
        padding: 20px;
        border-radius: 5px;
        border: 1px solid #3e4a36;
        position: relative;
        z-index: 10;
    }
    
    #tank-campaign-root .nation-selection p { 
        color: #a9a9a9; 
        margin-bottom: 20px;
    }

    /* Кнопки наций */
    #tank-campaign-root .nation-buttons {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin-top: 25px;
    }

    #tank-campaign-root .nation-button {
        position: relative;
        padding: 20px 40px;
        color: #fff;
        border: 2px solid #556b2f;
        border-radius: 4px;
        font-size: 1.2em;
        font-family: 'Black Ops One', 'Roboto', sans-serif !important;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 200px;
        text-align: center;
        text-transform: uppercase;
        box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        background-color: #2f3526;
        z-index: 10;
    }

    /* Флаги наций */
    #tank-campaign-root .nation-button.usa { background: linear-gradient(rgba(47, 53, 38, 0.8), rgba(47, 53, 38, 0.8)), url('https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg') center/cover; }
    #tank-campaign-root .nation-button.germany { background: linear-gradient(rgba(47, 53, 38, 0.8), rgba(47, 53, 38, 0.8)), url('https://upload.wikimedia.org/wikipedia/en/b/ba/Flag_of_Germany.svg') center/cover; }
    #tank-campaign-root .nation-button.ussr { background: linear-gradient(rgba(47, 53, 38, 0.8), rgba(47, 53, 38, 0.8)), url('https://upload.wikimedia.org/wikipedia/commons/a/a9/Flag_of_the_Soviet_Union.svg') center/cover; }

    #tank-campaign-root .nation-button:hover {
        transform: translateY(-3px);
        border-color: #ffd700;
        box-shadow: 0 10px 20px rgba(0,0,0,0.6);
        color: #ffd700;
        background-blend-mode: soft-light;
    }
    
    /* Кнопка "Назад" внутри танка */
    #tank-campaign-root .back-btn-tank {
        background: #8b4500;
        background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.1) 5px, rgba(0,0,0,0.1) 10px);
        display: none; 
        padding: 15px 30px;
        color: white;
        border: 2px solid #cd5c5c;
        border-radius: 4px;
        font-size: 1em;
        font-weight: bold;
        text-transform: uppercase;
        cursor: pointer;
        transition: all 0.3s;
        margin: 30px auto 0;
        box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }

    #tank-campaign-root .back-btn-tank:hover {
        background: #a0522d;
        transform: scale(1.02);
        border-color: #ff6347;
    }

    /* Контейнер для загружаемого контента (наций) */
    #tank-campaign-root #nation-content {
        margin-top: 30px;
        background: rgba(30, 35, 30, 0.95);
        color: #dcdcdc;
        padding: 25px;
        border-radius: 4px;
        min-height: 100px;
        text-align: left;
        border: 1px solid #3e4a36;
        box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
    }
    
    /* Подвал танка */
    #tank-campaign-root .tank-footer {
        text-align: center;
        font-size: 0.9em;
        color: #6b8e23;
        margin-top: 50px;
        padding: 15px;
        border-top: 1px solid #3e4a36;
    }

    /* --- АДАПТАЦИЯ (MOBILE) --- */
    @media (max-width: 768px) {
        #tank-campaign-root { 
            padding: 15px; 
            width: 100%; 
            margin-top: 10px;
            overflow-x: hidden; 
        }
        
        #tank-campaign-root::after { display: none; }
        
        #tank-campaign-root h1 { font-size: 1.8em; }
        #tank-campaign-root .nation-buttons { flex-direction: column; gap: 15px; }
        #tank-campaign-root .nation-button { width: 100%; font-size: 1.4em; padding: 25px; }
        #tank-campaign-root #nation-content { padding: 15px; }
    }
</style>

<div id="tank-campaign-root">
    <h1><i class="fas fa-shield-alt"></i> WTM: Танковая кампания</h1>
    
    <div class="nation-selection" id="nation-selection">
        <h2><i class="fas fa-map-marker-alt"></i> Выбор нации</h2>
        <p>Выберите интересующую нацию для просмотра техники:</p>
        
        <div class="nation-buttons">
            <button class="nation-button usa" onclick="loadTankNation('выбор техники США.html')">
                ★ США
            </button>
            <button class="nation-button germany" onclick="loadTankNation('техника Германии.html')">
                ✙ Германия
            </button>
            <button class="nation-button ussr" onclick="loadTankNation('техника СССР.html')">
                ☭ СССР
            </button>
        </div>
        
        <button class="back-btn-tank" onclick="returnToTankMenu()">
            <i class="fas fa-undo"></i> Назад к выбору нации
        </button>
    </div>
    
    <div id="nation-content">
        <p style="color:#6b8e23; font-style:italic; text-align: center;">
            <i class="fas fa-arrow-up"></i> Выберите нацию выше, чтобы загрузить досье.
        </p>
    </div>
    
    <footer class="tank-footer">
        <p>Версия 2.4. Последнее обновление 12.12.2025. Если найдете ошибки или имеются предложения - писать @fortunawtm.</p>
    </footer>
</div>

<script>
    async function loadTankNation(url) {
        // Ищем элементы только внутри нашего root, чтобы не перепутать с другими разделами
        const root = document.getElementById('tank-campaign-root');
        const contentDiv = root.querySelector('#nation-content');
        
        contentDiv.innerHTML = '<div style="text-align:center; padding:20px;"><h3 style="color:#8fbc8f;">ПОЛУЧЕНИЕ ДАННЫХ...</h3><div style="display:inline-block; width:30px; height:30px; border:3px solid rgba(218, 165, 32, 0.2); border-top:3px solid #daa520; border-radius:50%; animation:tankSpin 1s linear infinite;"></div></div><style>@keyframes tankSpin {0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); }}</style>';
        
        try {
            const resp = await fetch(url);
            if (!resp.ok) throw new Error('Файл не найден');
            const html = await resp.text();
            
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            // Вставляем контент
            contentDiv.innerHTML = doc.body.innerHTML;
            
            // Если в подгружаемом файле есть скрипты (редко, но бывает)
            const scripts = doc.querySelectorAll('script');
            scripts.forEach(script => {
                const newScript = document.createElement('script');
                newScript.textContent = script.textContent;
                document.body.appendChild(newScript);
            });

            // Смена фона (это глобальное действие, тут конфликтов стилей нет, так как это JS)
            setTimeout(() => {
                if (url.includes('США')) {
                    document.body.style.backgroundImage = 'url("https://static.wtmobile.com/upload/fileman/images/wallpapers/25_07_freedomfighters/1080x2340_wtm_freedom_fighters_6caa665440c37540dbcfe17edf84d9fe.jpg")'; 
                } else if (url.includes('Германии')) {
                    document.body.style.backgroundImage = 'url("https://static.wtmobile.com/upload/fileman/images/wallpapers/25_08_ironeclipse/1080x2340_wtm_iron_eclipse_ab49c8f11e8d61405c7ca0ff1c15f287.jpg")';
                } else if (url.includes('СССР')) {
                    document.body.style.backgroundImage = 'url("https://static.wtmobile.com/upload/fileman/images/wallpapers/24_12_frozenfront/1080x2340_wtm_frozen_front_b82827c44190754e4e7b97b2a6e98565.jpg")';
                }
                
                // Скрываем кнопки выбора нации, показываем "Назад"
                root.querySelectorAll('.nation-button').forEach(btn => btn.style.display = 'none');
                root.querySelector('.back-btn-tank').style.display = 'block';
                root.querySelector('#nation-selection h2').style.display = 'none';
                root.querySelector('#nation-selection p').style.display = 'none';
                
                contentDiv.scrollIntoView({ behavior: 'smooth' });

            }, 200);
        } catch (e) {
            contentDiv.innerHTML = `<p style="color:#ff4444; border: 1px solid red; padding: 10px;">ОШИБКА ЗАГРУЗКИ: ${e.message}</p>`;
        }
    }

    function returnToTankMenu() {
        const root = document.getElementById('tank-campaign-root');
        
        root.querySelector('#nation-content').innerHTML = '<p style="color:#6b8e23; font-style:italic; text-align: center;"><i class="fas fa-arrow-up"></i> Выберите нацию выше, чтобы загрузить досье.</p>';
        document.body.style.backgroundImage = 'url("https://static.wtmobile.com/upload/fileman/images/wallpapers/25_05_ounitedfront/1080x1920_wtm_united_front_96f0a2c762f88a30ce1c45f1d02a4093.jpg")';
        
        root.querySelectorAll('.nation-button').forEach(btn => btn.style.display = 'block');
        root.querySelector('.back-btn-tank').style.display = 'none';
        root.querySelector('#nation-selection h2').style.display = 'block';
        root.querySelector('#nation-selection p').style.display = 'block';
    }
</script>














































